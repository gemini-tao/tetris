{"version":3,"sources":["components/Decorate/style.module.scss","components/Screen/style.module.scss","containers/style.module.scss","components/Keyboard/style.module.scss","store/types/index.ts","locales/index.ts","components/Pixel/index.tsx","components/Matrix.tsx","constants/block.ts","components/Decorate/index.tsx","components/Screen/index.tsx","components/Keyboard/Button/index.tsx","components/Keyboard/index.tsx","containers/index.tsx","utils/index.ts","store/actions/index.ts","utils/serviceWorker.ts","store/reducers/matrix.ts","store/reducers/index.ts","store/reducers/locales.ts","store/reducers/windowWidth.ts","store/sagas/index.ts","store/index.ts","index.tsx","components/Pixel/style.module.scss","components/Keyboard/Button/style.module.scss"],"names":["module","exports","wrapper","decorate","logo","left","right","center","dotsLeft","dotsRight","dot","screen","main","record","app","fadeIn","loading","fadeOut","keyboard","keyPause","keySound","keyReset","keyDrop","keyRotate","keyLeft","keyRight","keyDown","keyDecorate","keyDecorateCenter","keyDecorateItem","Types","LOCALES","en-US","require","zh-CN","Block","_ref","highlight","x","y","width","hide","fillColor","style","fillHighlight","fillDefault","strokeColor","strokeHighlight","strokeDefault","isHide","react_default","a","createElement","react","react_responsive_default","maxWidth","opacity","height","strokeWidth","fillOpacity","className","minWidth","defaultProps","memo","Matrix","nextProps","_this$props","this","props","matrix","hideBlankPixel","_this$props2","pixelWidth","length","console","log","map","row","i","b","j","Pixel","key","concat","Component","BLOCK_DECORATE","BLOCK_DECORATE_REVERSE","reduce","arr","item","_item","Object","slicedToArray","f","s","push","Decorate","$ref_Left","React","createRef","state","w","current","clientWidth","setState","calcWidth","preProps","windowWidth","children","intl","get","ref","components_Matrix","PureComponent","Screen","$ref_Panl","_this","prevProps","components_Decorate","Button","classNames","title","textDirection","active","cn","styles","myButton","flexDirection","button","defineProperty","textAlign","Keyboard","Keyboard_Button","transform","App","initLocales","switchLocales","locales","updateLocales","setTimeout","window","location","href","origin","pathname","resizeChangeHander","document","body","updateWindowWidth","str","init","currentLocale","_this2","lang","name","reg","RegExp","r","search","substr","match","decodeURIComponent","getUrlParam","hasOwnProperty","loadLocales","addEventListener","debounce","window_width","components_Screen","components_Keyboard","react_loading_default","type","connect","dispatch","UPDATE_LOCALES","payload","action","num","WINDOW_RESIZE","updateMatrix","UPDATE_MATRIX","isFirst","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","waiting","onUpdate","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","catch","error","reload","initState","Array","fill","combineReducers","arguments","undefined","incrementAsync","fetchData","watchIncrementAsync","rootSaga","regenerator_default","wrap","_context","prev","next","delay","put","ADD_COUNT","stop","_marked","fn","Promise","resolve","reject","greeting","task","_context2","call","sent","fork","_marked2","_context3","takeEvery","ADD_COUNT_ASYNC","_marked3","_context4","_marked4","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistConfig","storage","version","persistedReducer","persistReducer","rootReducer","sagaMiddleware","createSagaMiddleware","configStore","store","createStore","applyMiddleware","persistor","persistStore","run","configureStore","ReactDOM","render","es","integration_react","containers","getElementById","URL","process","fetch","response","contentType","headers","status","indexOf","ready","unregister","checkValidServiceWorker","confirm","postMessage","e"],"mappings":"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","file":"static/js/main.28f8f292.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__8uAKD\",\"decorate\":\"style_decorate__2yVS0\",\"logo\":\"style_logo__103MU\",\"left\":\"style_left__3VZgR\",\"right\":\"style_right__131vn\",\"center\":\"style_center__3xGi9\",\"dotsLeft\":\"style_dotsLeft__2JHgU\",\"dotsRight\":\"style_dotsRight__YUdKB\",\"dot\":\"style_dot__1Dn0v\",\"screen\":\"style_screen__22mLp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__3yp4u\",\"main\":\"style_main__1-GWL\",\"record\":\"style_record__2pkUv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"style_app__1hNgg\",\"fadeIn\":\"style_fadeIn__37VMq\",\"loading\":\"style_loading__2pDYy\",\"fadeOut\":\"style_fadeOut__1jM_3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"keyboard\":\"style_keyboard__1NnJR\",\"keyPause\":\"style_keyPause__3r2v-\",\"keySound\":\"style_keySound__Gwj98\",\"keyReset\":\"style_keyReset__1EHWF\",\"keyDrop\":\"style_keyDrop__3jOUm\",\"keyRotate\":\"style_keyRotate__1VYN4\",\"keyLeft\":\"style_keyLeft__2rQPm\",\"keyRight\":\"style_keyRight__1JTOX\",\"keyDown\":\"style_keyDown__3pm7V\",\"keyDecorate\":\"style_keyDecorate__1kXBK\",\"keyDecorateCenter\":\"style_keyDecorateCenter__23zYE\",\"keyDecorateItem\":\"style_keyDecorateItem__DyvFw\"};","/*\n * @Author: lifan\n * @Date: 2018-12-12 13:31:05\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 12:11:51\n */\n\n/* eslint-disable no-unused-vars */\nenum Types {\n  ADD_COUNT = 'ADD_COUNT',\n  ADD_COUNT_ASYNC = 'ADD_COUNT_ASYNC',\n  REDUCE_COUNT = 'REDUCE_COUNT',\n  WINDOW_RESIZE = 'WINDOW_RESIZE',\n  UPDATE_LOCALES = 'UPDATE_LOCALES',\n  GAME_OVER = 'GAME_OVER', // 游戏结束\n  PAUSE = 'PAUSE', // 暂停\n  START = 'START', // 开始\n  RESTART = 'RESTART', // 重新开始\n  RORATE = 'RORATE', // 旋转\n  SET_SPEED = 'SET_SPEED', // 设置速度\n  SET_DEFAULT_LINES = 'SET_DEFAULT_LINES', // 设置初始行数\n  UPDATE_MATRIX = 'UPDATE_MATRIX', // 更新矩阵\n}\n\nexport default Types;\n","/*\n * @Author: lifan\n * @Date: 2018-12-14 10:16:11\n * @Last Modified by:   lifan\n * @Last Modified time: 2018-12-14 10:16:11\n */\nexport const LOCALES = {\n  'en-US': require('./en-US.json'),\n  'zh-CN': require('./zh-CN.json'),\n};\n\nexport type TYPE_LOCALES = keyof typeof LOCALES;\n","/*\n * @Author: lifan\n * @Date: 2018-12-19 09:02:19\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 14:55:16\n */\nimport React, { memo, Fragment } from 'react';\nimport MediaQuery from 'react-responsive';\nimport style from './style.module.scss';\n\ninterface BlockProps {\n  x: number;\n  y: number;\n  width: number;\n  highlight?: boolean;\n  hide?: boolean;\n}\n\nconst Block = ({ highlight, x, y, width, hide }: BlockProps) => {\n  const fillColor = highlight ? style.fillHighlight : style.fillDefault;\n  const strokeColor = highlight ? style.strokeHighlight : style.strokeDefault;\n  const isHide = hide ? 0 : 1;\n  return (\n    <Fragment>\n      <MediaQuery maxWidth={414}>\n        <g opacity={isHide}>\n          <rect\n            x={x}\n            y={y}\n            width={width}\n            height={width}\n            opacity={0}\n          />\n          <rect\n            x={x + 1.5}\n            y={y + 1.5}\n            width={width - 3}\n            height={width - 3}\n            style={{ strokeWidth: 1.5, fillOpacity: 0.01 }}\n            className={strokeColor}\n          />\n          <rect\n            x={x + 3.5}\n            y={y + 3.5}\n            width={width - 7}\n            height={width - 7}\n            className={fillColor}\n          />\n        </g>\n      </MediaQuery>\n      <MediaQuery minWidth={415} maxWidth={539}>\n        <g opacity={isHide}>\n          <rect\n            x={x}\n            y={y}\n            width={width}\n            height={width}\n            opacity={0}\n          />\n          <rect\n            x={x + 1.5}\n            y={y + 1.5}\n            width={width - 3}\n            height={width - 3}\n            style={{ strokeWidth: 1.5, fillOpacity: 0.01 }}\n            className={strokeColor}\n          />\n          <rect\n            x={x + 4}\n            y={y + 4}\n            width={width - 8}\n            height={width - 8}\n            className={fillColor}\n          />\n        </g>\n      </MediaQuery>\n      <MediaQuery minWidth={540}>\n        <g opacity={isHide}>\n          <rect\n            x={x}\n            y={y}\n            width={width}\n            height={width}\n            opacity={0}\n          />\n          <rect\n            x={x + 2}\n            y={y + 2}\n            width={width - 4}\n            height={width - 4}\n            style={{ strokeWidth: 2, fillOpacity: 0.01 }}\n            className={strokeColor}\n          />\n          <rect\n            x={x + 5}\n            y={y + 5}\n            width={width - 10}\n            height={width - 10}\n            className={fillColor}\n          />\n        </g>\n      </MediaQuery>\n    </Fragment>\n  );\n};\n\nBlock.defaultProps = {\n  highlight: false,\n  hide: false,\n};\n\nexport default memo(Block);\n","/*\n * @Author: lifan\n * @Date: 2018-12-21 10:29:52\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 14:08:30\n */\nimport React, { Component } from 'react';\nimport Pixel from './Pixel';\n\ninterface MatrixProps {\n  matrix: number[][];\n  width: number;\n  hideBlankPixel?: boolean;\n}\n\nclass Matrix extends Component<MatrixProps> {\n  static defaultProps = {\n    hideBlankPixel: false\n  }\n\n  shouldComponentUpdate(nextProps: MatrixProps) {\n    const { matrix, width, hideBlankPixel } = this.props;\n    if (nextProps.matrix !== matrix || nextProps.width !== width ||\n        nextProps.hideBlankPixel !== hideBlankPixel) {\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    const { matrix, width, hideBlankPixel } = this.props;\n    const pixelWidth = width / matrix[0].length || 10;\n    const height = matrix.length * pixelWidth;\n\n    console.log('matrix rerender');\n\n    return (\n      <svg width={width} height={height}>\n        {\n          matrix.map((row, i) => (\n            row.map((b, j) => (\n              <Pixel key={`${i}_${j}`} width={pixelWidth} x={j * pixelWidth} y={i * pixelWidth} highlight={!!b} hide={hideBlankPixel && b === 0} />\n            ))\n          ))\n        }\n      </svg>\n    );\n  }\n}\n\nexport default Matrix;\n","/*\n * @Author: lifan\n * @Date: 2018-12-19 09:55:19\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 16:29:35\n */\n// 方块类型\nexport const BLOCK_SHAPE = {\n  'I': [\n    [1, 1, 1, 1]\n  ],\n  'L': [\n    [1, 0, 0],\n    [1, 1, 1],\n  ],\n  'J': [\n    [0, 0, 1],\n    [1, 1, 1],\n  ],\n  'Z': [\n    [1, 1, 0],\n    [0, 1, 1]\n  ],\n  'S': [\n    [0, 1, 1],\n    [1, 1, 0],\n  ],\n  'O': [\n    [1, 1],\n    [1, 1]\n  ],\n  'T': [\n    [0, 1, 0],\n    [1, 1, 1],\n  ]\n};\n\n// 速度\nexport const SPEEDS = [800, 650, 500, 370, 250, 160];\n\n// 装饰方块\nexport const BLOCK_DECORATE = [\n  [0, 1],\n  [1, 1],\n  [1, 0],\n  [0, 0],\n  [1, 0],\n  [1, 1],\n  [1, 0],\n  [0, 0],\n  [1, 1],\n  [1, 1],\n  [0, 0],\n  [0, 1],\n  [1, 1],\n  [0, 1],\n  [0, 0],\n  [1, 1],\n  [0, 1],\n  [0, 1],\n  [0, 0],\n  [1, 0],\n  [1, 0],\n  [1, 0],\n  [1, 0],\n];\n\nexport const BLOCK_DECORATE_REVERSE = BLOCK_DECORATE.reduce((arr: number[][], item) => {\n  const [f, s] = item;\n  arr.push([s, f]);\n  return arr;\n}, []);\n","import React, { PureComponent, ReactNode } from 'react';\nimport intl from 'react-intl-universal';\nimport Matrix from '../Matrix';\nimport { BLOCK_DECORATE, BLOCK_DECORATE_REVERSE } from '../../constants/block';\nimport style from './style.module.scss';\n\ninterface DecorateProps {\n  children: ReactNode;\n  windowWidth: number;\n}\n\ninterface DecorateState {\n  w: number;\n}\n\nclass Decorate extends PureComponent<DecorateProps, DecorateState> {\n  private readonly $ref_Left: React.RefObject<HTMLDivElement> = React.createRef();\n\n  state = {\n    w: 0\n  }\n\n  private calcWidth() {\n    if (this.$ref_Left.current) {\n      const width = this.$ref_Left.current.clientWidth;\n      this.setState({\n        w: width,\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.calcWidth();\n  }\n\n  componentDidUpdate(preProps: DecorateProps) {\n    if (this.props.windowWidth !== preProps.windowWidth) {\n      this.calcWidth();\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    const { w } = this.state;\n\n    return (\n      <div className={style.wrapper}>\n        <div className={style.decorate}>\n          <h1 className={style.logo}>\n            {\n              intl.get('gameName')\n            }\n          </h1>\n        </div>\n        <div className={style.left} ref={this.$ref_Left}>\n          <Matrix matrix={BLOCK_DECORATE} width={w} hideBlankPixel />\n        </div>\n        <div className={style.right}>\n          <Matrix matrix={BLOCK_DECORATE_REVERSE} width={w} hideBlankPixel />\n        </div>\n        <div className={style.center}>\n          <div className={style.dotsLeft}>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n          </div>\n          <div className={style.dotsRight}>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n            <span className={style.dot}></span>\n          </div>\n          <div className={style.screen}>\n            {\n              children\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Decorate;\n","/*\n * @Author: lifan\n * @Date: 2018-12-19 21:05:34\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 15:17:51\n */\nimport React, { PureComponent } from 'react';\nimport Decorate from '../Decorate';\nimport Matrix from '../Matrix';\n\nimport style from './style.module.scss';\n\ninterface ScreenProps {\n  matrix: number[][];\n  windowWidth: number;\n}\n\ninterface ScreenState {\n  w: number;\n}\n\nclass Screen extends PureComponent<ScreenProps, ScreenState> {\n  private readonly $ref_Panl: React.RefObject<HTMLDivElement> = React.createRef();\n  public state = {\n    w: 0\n  }\n\n  private calcWidth = () => {\n    if (this.$ref_Panl.current) {\n      this.setState({\n        w: this.$ref_Panl.current.clientWidth\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.calcWidth();\n  }\n\n  componentDidUpdate(prevProps: ScreenProps) {\n    if (this.props.windowWidth !== prevProps.windowWidth) {\n      this.calcWidth();\n    }\n  }\n\n  render() {\n    const { matrix, windowWidth } = this.props;\n    const { w } = this.state;\n\n    return (\n      <Decorate windowWidth={windowWidth}>\n        <div className={style.wrapper}>\n          <div className={style.main}>\n            <div ref={this.$ref_Panl}>\n              <Matrix matrix={matrix} width={w} />\n            </div>\n          </div>\n          {/* <div className={style.record}>\n            record\n          </div> */}\n        </div>\n      </Decorate>\n    );\n  }\n}\n\nexport default Screen;\n","/*\n * @Author: lifan\n * @Date: 2018-12-21 22:52:04\n * @Last Modified by: lifan\n * @Last Modified time: 2019-01-03 14:53:14\n */\nimport React, { PureComponent } from 'react';\nimport cn from 'classnames';\nimport styles from './style.module.scss';\n\ninterface MyButtonProps {\n  title: string;\n  classNames: string;\n  textDirection?: 'column' | 'row';\n  active?: boolean;\n}\n\nclass Button extends PureComponent<MyButtonProps> {\n  static defaultProps = {\n    textDirection: 'column',\n    active: false,\n  };\n\n  render() {\n    const { classNames, title, textDirection, active } = this.props;\n    return (\n      <div className={cn(styles.myButton, classNames)} style={{ flexDirection: textDirection }}>\n        <span className={cn(styles.button, { [styles.active]: active })} />\n        <span className={styles.title} style={{ textAlign: textDirection === 'row' ? 'left' : 'center' }} >{title}</span>\n      </div>\n    );\n  }\n}\n\nexport default Button;\n","/*\n * @Author: lifan\n * @Date: 2018-12-21 22:32:13\n * @Last Modified by: lifan\n * @Last Modified time: 2019-01-03 14:50:44\n */\nimport React, { PureComponent } from 'react';\nimport MyButton from './Button';\nimport intl from 'react-intl-universal';\nimport styles from './style.module.scss';\nconsole.log(styles);\nclass Keyboard extends PureComponent {\n  render() {\n    return (\n      <div className={styles.keyboard}>\n        <MyButton title={intl.get('key.pause')} classNames={styles.keyPause} />\n        <MyButton title={intl.get('key.sound')} classNames={styles.keySound} />\n        <MyButton title={intl.get('key.reset')} classNames={styles.keyReset} />\n        <MyButton title={intl.get('key.drop')} classNames={styles.keyDrop} />\n        <MyButton title={intl.get('key.rotate')} classNames={styles.keyRotate} textDirection=\"row\" />\n        <MyButton title={intl.get('key.down')} classNames={styles.keyDown} />\n        <MyButton title={intl.get('key.left')} classNames={styles.keyLeft} />\n        <MyButton title={intl.get('key.right')} classNames={styles.keyRight} />\n        <div className={styles.keyDecorate}>\n          <span className={styles.keyDecorateItem}></span>\n          <div className={styles.keyDecorateCenter}>\n            <span className={styles.keyDecorateItem} style={{ transform: 'rotate(270deg)' }}></span>\n            <span className={styles.keyDecorateItem} style={{ transform: 'rotate(90deg)' }}></span>\n          </div>\n          <span className={styles.keyDecorateItem} style={{ transform: 'rotate(180deg)' }}></span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Keyboard;\n","/*\n * @Author: lifan\n * @Date: 2018-12-21 10:13:15\n * @Last Modified by: lifan\n * @Last Modified time: 2019-01-03 14:29:24\n */\nimport React, { PureComponent } from 'react';\nimport { Dispatch } from 'redux';\nimport { State } from '../store/reducers';\nimport { connect } from 'react-redux';\nimport debounce from 'lodash.debounce';\nimport ReactLoading from 'react-loading';\nimport intl from 'react-intl-universal';\nimport { LOCALES, TYPE_LOCALES } from '../locales';\nimport * as action from '../store/actions';\nimport { getUrlParam } from '../utils';\nimport Screen from '../components/Screen';\nimport Keyboard from '../components/Keyboard';\n\nimport style from './style.module.scss';\n\ninterface AppProps {\n  locales: TYPE_LOCALES;\n  matrix: number[][];\n  window_width: number;\n  updateLocales: (locales: TYPE_LOCALES) => void;\n  updateWindowWidth: (num: number) => void;\n  updateMatrix: (matrix: number[][]) => void;\n}\n\ninterface AppState {\n  initLocales: boolean;\n}\n\nclass App extends PureComponent<AppProps, AppState> {\n  public state = {\n    initLocales: false\n  };\n\n  private async loadLocales(str: TYPE_LOCALES) {\n    try {\n      await intl.init({\n        currentLocale: str,\n        locales: LOCALES,\n      });\n    } finally {\n      if (process.env.NODE_ENV === 'development') {\n        this.setState({\n          initLocales: true\n        });\n      } else {\n        setTimeout(() => {\n          this.setState({\n            initLocales: true\n          });\n        }, 2000);\n      }\n    }\n  }\n\n  private initLocales(locales: TYPE_LOCALES) {\n    const lang = getUrlParam('lang') as TYPE_LOCALES;\n\n    if (lang && LOCALES.hasOwnProperty(lang)) {\n      this.props.updateLocales(lang);\n      this.loadLocales(lang);\n    } else {\n      this.loadLocales(locales);\n    }\n  }\n\n  private switchLocales = (locales: TYPE_LOCALES) => {\n    this.props.updateLocales(locales);\n    setTimeout(() => {\n      window.location.href = `${window.location.origin}${window.location.pathname}?lang=${locales}`;\n    }, 20);\n  }\n\n  private resizeChangeHander = () => {\n    const width = document.body.clientWidth;\n    this.props.updateWindowWidth(width);\n  }\n\n  componentDidMount() {\n    this.initLocales(this.props.locales);\n    window.addEventListener('resize', debounce(this.resizeChangeHander, 50));\n    // setInterval(() => {\n    //   const newArr = this.props.matrix.map(item => {\n    //     return item.map(() => Math.round(Math.random()));\n    //   });\n    //   this.props.updateMatrix(newArr);\n    // }, 800);\n  }\n\n  componentDidUpdate(prevProps: AppProps) {\n    if (this.state.initLocales && prevProps.locales !== this.props.locales) {\n      this.switchLocales(this.props.locales);\n    }\n  }\n\n  render() {\n    const { initLocales } = this.state;\n    const { matrix, window_width } = this.props;\n\n    if (!initLocales) {\n      return <ReactLoading type={'spinningBubbles'} className={style.loading} />;\n    }\n\n    return (\n      <div className={style.app}>\n        <Screen matrix={matrix} windowWidth={window_width} />\n        <Keyboard />\n      </div>\n    );\n  }\n}\n\nconst mapState = (state: State) => ({\n  locales: state.locales,\n  matrix: state.matrix,\n  window_width: state.window_width,\n});\n\nconst mapDispatch = (dispatch: Dispatch) => ({\n  updateLocales: (locales: TYPE_LOCALES) => dispatch(action.updateLocales(locales)),\n  updateWindowWidth: (num: number) => dispatch(action.windowResize(num)),\n  updateMatrix: (matrix: number[][]) => dispatch(action.updateMatrix(matrix)),\n});\n\nexport default connect(\n  mapState,\n  mapDispatch\n)(App);\n","/*\n * @Author: lifan\n * @Date: 2018-12-13 13:36:59\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 12:51:50\n */\n\n/**\n * 判断是否为移动端\n */\nexport const isMobile = (): boolean =>\n  /(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent);\n\n/**\n * 获取url参数\n * @param {string} name\n */\nexport const getUrlParam = (name: string) => {\n  const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`);\n  const r = window.location.search.substr(1).match(reg);\n\n  if (r != null) {\n    return decodeURIComponent(r[2]);\n  }\n\n  return;\n};\n\n/**\n * 比较matrix是否相等\n * @param {number[][]} prevMatrix 先前的matrix\n * @param {number[][]} matrix 当前的matrix\n */\nexport const compareMatrix = (prevMatrix: number[][], matrix: number[][]) => {\n  for (let i = 0; i < prevMatrix.length; i++) {\n    for (let j = 0; j < prevMatrix[i].length; j++) {\n      if (prevMatrix[i][j] !== matrix[i][j]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n","/*\n * @Author: lifan\n * @Date: 2018-12-12 14:50:48\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 12:13:10\n */\nimport Types from '../types';\nimport { TYPE_LOCALES } from '../../locales';\n\n/* eslint-disable no-use-before-define */\nexport type AddCount = ReturnType<typeof addCount>;\nexport const addCount = (num: number) => ({\n  type: <Types.ADD_COUNT>Types.ADD_COUNT,\n  payload: {\n    num\n  }\n});\n\nexport type AddCountAsync = ReturnType<typeof addCountAsync>;\nexport const addCountAsync = () => ({\n  type: <Types.ADD_COUNT_ASYNC>Types.ADD_COUNT_ASYNC,\n});\n\nexport type ReduceCount = ReturnType<typeof reduceCount>;\nexport const reduceCount = (num: number) => ({\n  type: <Types.REDUCE_COUNT>Types.REDUCE_COUNT,\n  payload: {\n    num\n  }\n});\n\nexport type UpdateLocales = ReturnType<typeof updateLocales>;\nexport const updateLocales = (locales: TYPE_LOCALES) => ({\n  type: <Types.UPDATE_LOCALES>Types.UPDATE_LOCALES,\n  payload: {\n    locales\n  }\n});\n\nexport type UpdateMatrix = ReturnType<typeof updateMatrix>;\nexport const updateMatrix = (matrix: number[][]) => ({\n  type: <Types.UPDATE_MATRIX>Types.UPDATE_MATRIX,\n  payload: {\n    matrix\n  }\n});\n\nexport type WindowResize = ReturnType<typeof windowResize>;\nexport const windowResize = (width: number) => ({\n  type: <Types.WINDOW_RESIZE>Types.WINDOW_RESIZE,\n  payload: {\n    width\n  }\n});\n\nexport type Action =\n  | AddCount\n  | AddCountAsync\n  | ReduceCount\n  | UpdateLocales\n  | UpdateMatrix\n  | WindowResize;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\n/* eslint-disable */\nlet isFirst = false;\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      if (registration.waiting) {\n        if (config && config.onUpdate) {\n          config.onUpdate(registration);\n        }\n        return;\n      }\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              isFirst = false;\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n              isFirst = true;\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n\n  navigator.serviceWorker.addEventListener('controllerchange', () => {\n    console.log('controllerchange');\n    if (!isFirst) {\n      window.location.reload();\n      isFirst = true;\n    }\n  });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/*\n * @Author: lifan\n * @Date: 2018-12-20 15:36:36\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 11:19:55\n */\nimport Types from '../types';\nimport { Action } from '../actions';\n\nconst initState = new Array(20).fill(0).map(() => new Array(10).fill(0));\n\nexport default (state: number[][] = initState, action: Action) => {\n  switch (action.type) {\n    case Types.UPDATE_MATRIX:\n      return action.payload.matrix;\n    default: return state;\n  }\n};\n","import { combineReducers } from 'redux';\nimport { TYPE_LOCALES } from '../../locales';\nimport locales from './locales';\nimport matrix from './matrix';\nimport window_width from './windowWidth';\n\n\nexport interface State {\n  locales: TYPE_LOCALES;\n  matrix: number[][];\n  window_width: number;\n}\n\nexport default combineReducers<State>({\n  locales,\n  matrix,\n  window_width,\n});\n","/*\n * @Author: lifan\n * @Date: 2018-12-13 13:56:58\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-14 10:21:38\n */\n\nimport Types from '../types';\nimport { Action } from '../actions';\nimport { TYPE_LOCALES } from '../../locales';\n\nexport default (state: TYPE_LOCALES = 'en-US', action: Action) => {\n  switch (action.type) {\n    case Types.UPDATE_LOCALES:\n      return action.payload.locales;\n    default: return state;\n  }\n};\n","/*\n * @Author: lifan\n * @Date: 2018-12-13 13:56:58\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-21 12:16:34\n */\n\nimport Types from '../types';\nimport { Action } from '../actions';\n\nexport default (state = 0, action: Action) => {\n  switch (action.type) {\n    case Types.WINDOW_RESIZE:\n      return action.payload.width;\n    default: return state;\n  }\n};\n","import { call, put, takeEvery, fork, delay } from 'redux-saga/effects';\nimport Types from '../types';\n\nexport function* incrementAsync() {\n  yield delay(1000);\n  yield put({\n    type: Types.ADD_COUNT,\n    payload: {\n      num: 1,\n    }\n  });\n}\n\n// 模拟数据异步获取\nfunction fn() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve('hello saga');\n    }, 2000);\n  });\n}\n\nfunction* fetchData() {\n  // 等待 2 秒后，打印欢迎语（阻塞）\n  const greeting = yield call(fn);\n  console.log('greeting: ', greeting);\n\n  // 立即打印 task 对象（非阻塞）\n  const task = yield fork(fn);\n  console.log('task: ', task);\n}\n\n// function* watcher() {\n//   while (true) {\n//     yield delay(1000);\n//     console.log(1000);\n//     yield fork(fetchData);\n//   }\n// }\n\nexport function* watchIncrementAsync() {\n  yield takeEvery(Types.ADD_COUNT_ASYNC, incrementAsync);\n}\n\n// single entry point to start all Sagas at once\nexport default function* rootSaga() {\n  yield fork(fetchData);\n  yield fork(watchIncrementAsync);\n}\n","/*\n * @Author: lifan\n * @Date: 2018-12-12 09:46:29\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-20 15:34:50\n */\nimport { createStore, compose, applyMiddleware, Store } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { persistReducer, persistStore, PersistConfig } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport rootReducer from './reducers';\nimport rootSaga from './sagas';\n\n\nconst composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n// const migrations = {\n//   0: (state: State) => {\n//     // migration clear out device state\n//     return state;\n//   },\n//   1: (state: State) => {\n//     // migration to keep only device state\n//     return state;\n//   }\n// };\nconst persistConfig: PersistConfig = {\n  key: 'root',\n  storage,\n  version: 1,\n  // migrate: createMigrate(migrations, { debug: true })\n};\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\nconst sagaMiddleware  = createSagaMiddleware();\n\nexport default () => {\n  let store: Store = createStore(\n    persistedReducer,\n    composeEnhancers(\n      applyMiddleware(\n        sagaMiddleware,\n      )\n    )\n  );\n\n  const persistor = persistStore(store);\n  // persistor.pause();\n\n  sagaMiddleware.run(rootSaga);\n\n  return {\n    store,\n    persistor\n  };\n};\n","/*\n * @Author: lifan\n * @Date: 2018-12-09 21:11:01\n * @Last Modified by: lifan\n * @Last Modified time: 2018-12-19 14:16:49\n */\nimport '@babel/polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './containers';\nimport * as serviceWorker from './utils/serviceWorker';\nimport configureStore from './store';\n\nimport 'normalize.css';\nimport './assets/scss/index.scss';\n\nconst configStore = configureStore();\n\nReactDOM.render(\n  <Provider store={configStore.store}>\n    <PersistGate persistor={configStore.persistor}>\n      <App />\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register({\n  onUpdate: (registration: ServiceWorkerRegistration) => {\n    if (confirm('监测到更新，点击更新')) {\n      try {\n        registration.waiting && registration.waiting.postMessage('skipWaiting');\n      } catch (e) {\n        window.location.reload();\n      }\n    }\n  },\n  onSuccess: () => {\n    console.log('success');\n  }\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fillDefault\":\"style_fillDefault__3kZxf\",\"fillHighlight\":\"style_fillHighlight__vlGVt\",\"strokeDefault\":\"style_strokeDefault__2W4Rx\",\"strokeHighlight\":\"style_strokeHighlight__2jXLj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myButton\":\"style_myButton__1Mdey\",\"button\":\"style_button__2yh2e\",\"active\":\"style_active__LFdHD\",\"title\":\"style_title__140y4\"};"],"sourceRoot":""}